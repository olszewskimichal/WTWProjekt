<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout">
<head>
    <title>Produkty</title>
    <script src="/js/ProductListController.js"></script>
</head>
<body>
<div layout:fragment="content">
    <div class="jumbotron">
        <h1 th:text="#{products}"></h1>
        <p>
            Wszystkie produkty
        </p>
    </div>
    <section class="container" ng-app="productApp">
        <div ng-controller="productListCtrl" ng-init="getProducts()">
            <div class="row">
                <span ng-repeat="product in data">
                    <div class="col-sm-5 col-md-3" style="padding-bottom: 15px">
                        <div class="thumbnail">
                            <img src="{{product.imageURL}}" alt="image" style="width: 100%;height: 200px"/>
                            <div class="caption">
                                <h3>{{product.name}}</h3>
                                <p>{{product.price}} PLN</p>
                                <p>Liczba dostępnych sztuk: {{product.unitsInStock}}</p>
                                <p>
                                    <a ng-href="/products/product/{{product.id}}" class=" btn btn-primary">
                                    <span class="glyphicon-info-sign glyphicon"></span> Szczegóły
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                </span>
            </div>
            <div class="row">
                <div class="form-group col-md-1">
                    <select class="form-control pagination" id="pageSizeSelect"
                            ng-init="pageSize=4"
                            ng-model="pageSize" ng-options="n for n in [] | range:4:12"
                            ng-change="changePageSize()">
                    </select>
                </div>
                <div ng-if="totalPages!=1" class="form-group col-md-11 pagination-centered">
                    <ul class="pagination">
                        <li id="li0" ng-class="{disabled: pageNumber === 0}"><a class="pageLink"
                                                                                th:attr="ng-click='productFromPageMax('+1+','+${products.getTotalPages()}+');'">&laquo;</a>
                        </li>
                        <li id="li1" ng-class="{disabled: pageNumber === 0}"><a class="pageLink"
                                                                                th:attr="ng-click='productFromPageMax('+${products.getNumber()}+','+${products.getTotalPages()}+');'">&larr;</a>
                        </li>
                        <li ng-repeat="n in [] | range:1:totalPages" ng-init="getTotalPages()"
                            ng-class="{active: n === pageNumber+1}">
                            <a class="pageLink" ng-click="productFromPageMax(n,totalPages)"
                            >{{n}}</a>
                        </li>
                        
                        <li id="li3" ng-class="{disabled: pageNumber+1 === totalPages}">
                            <a
                                    class="pageLink"
                                    th:attr="ng-click='productFromPageMax('+${products.getNumber()+2}+','+${products.getTotalPages()}+');'">&rarr;</a>
                        </li>
                        <li id="li4" ng-class="{disabled: pageNumber+1 === totalPages}">
                            <a
                                    class="pageLink"
                                    th:attr="ng-click='productFromPageMax('+${products.getTotalPages()}+','+${products.getTotalPages()}+');'">&raquo;</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
</div>
</body>
</html>